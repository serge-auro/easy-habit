
# Документация к Telegram Bot

## Описание модуля
Модуль реализует Telegram бота для управления ежедневными привычками пользователя. Бот позволяет добавлять, редактировать, удалять, отмечать привычки, а также создавать отчеты о прогрессе.

## Импортируемые модули
- `telebot`: основная библиотека для работы с Telegram API.
- `types` из `telebot`: используется для создания кастомных клавиатур.
- `config`: содержит конфигурационные данные, такие как токен бота.
- `actions`, `db`, `report`: модули для обработки действий с привычками и базой данных.

## Основные функции

### `create_inline_keyboard(button_keys)`
Метод для создания инлайн клавиатуры на основе предоставленных ключей.
- **Параметры**:
  - `button_keys`: List[str] - список ключей для кнопок.
- **Возвращает**:
  - `InlineKeyboardMarkup`: объект клавиатуры с кнопками.
- **Использует**:
  - `types.InlineKeyboardMarkup` и `types.InlineKeyboardButton` для создания клавиатуры и кнопок.

### Обработчики команд

#### `handle_start(message)`
Метод, обрабатывающий команду `/start`. Регистрирует пользователя и отправляет приветственное сообщение с клавиатурой.
- **Параметры**:
  - `message`: Message - сообщение от пользователя.
- **Возвращает**: None.
- **Использует**:
  - `init_user` для регистрации пользователя в системе.
  - `create_inline_keyboard` для создания начальной клавиатуры.
- **Исключения**:
  - Обрабатывает исключения при регистрации пользователя.

#### `handle_help(message)`
Метод, обрабатывающий команду `/help`. Отправляет сообщение с описанием доступных команд.
- **Параметры**:
  - `message`: Message - сообщение от пользователя.
- **Возвращает**: None.
- **Использует**:
  - `create_inline_keyboard` для создания клавиатуры с доступными опциями.

### Обработчики callback_query

#### `handle_menu(call)`
Метод для обработки вызова меню. Отправляет основные опции в виде клавиатуры.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `create_inline_keyboard` для создания клавиатуры с опциями.

#### `handle_status(call)`
Метод для отображения статуса текущих привычек пользователя.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `habit_status` для получения статуса привычек.
  - `create_inline_keyboard` для создания клавиатуры.

## Запуск бота
Бот запущен в режиме long polling с использованием `bot.polling(none_stop=True)` для непрерывной обработки сообщений.

#### `handle_del_habit(call)`
Метод для удаления привычки.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `delete_habit` для удаления привычки из базы данных.
  - `create_inline_keyboard` для создания клавиатуры после удаления.

#### `delete_selected_habit(call)`
Метод для выполнения удаления выбранной привычки.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `delete_habit` для удаления привычки.
  - `bot.send_message` для уведомления пользователя о результате.

#### `handle_mark_habit(call)`
Метод для отметки привычки как выполненной.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `mark_habit` для отметки привычки.
  - `create_inline_keyboard` для предложения следующих шагов.

#### `mark_selected_habit(call)`
Метод для фактической отметки выбранной привычки.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `mark_habit` для изменения статуса привычки.
  - `bot.answer_callback_query` для подтверждения выполнения.

#### `handle_habits(call)`
Метод для отображения списка всех привычек.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `list_habits` для получения списка привычек.
  - `create_inline_keyboard` для управления привычками.

## Запуск бота
Использует `bot.polling(none_stop=True)` для беспрерывной обработки сообщений.


#### `handle_del_habit(call)`
Метод для обработки удаления привычек.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `habit_status` для получения активных привычек пользователя.
  - `create_inline_keyboard` для создания клавиатуры с опциями удаления.

#### `delete_selected_habit(call)`
Метод для удаления выбранной привычки.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `delete_habit` для удаления привычки из базы данных.
  - Отправляет сообщение о успешном удалении.

#### `handle_mark_habit(call)`
Метод для обработки отметки выполнения привычки.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `habit_status` для получения активных привычек.
  - `create_inline_keyboard` для создания клавиатуры выбора привычек для отметки.

#### `mark_selected_habit(call)`
Метод для отметки выбранной привычки как выполненной.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `mark_habit` для отметки привычки в базе данных.
  - Отправляет подтверждение пользователю о выполнении.

#### `handle_habits(call)`
Метод для обработки запроса списка привычек.
- **Параметры**:
  - `call`: CallbackQuery - запрос обратного вызова.
- **Возвращает**: None.
- **Использует**:
  - `list_habits` для получения списка всех доступных привычек.
  - `create_inline_keyboard` для создания клавиатуры с опциями действий над привычками.
